import{g as t}from"./index.CB87Sc6I.js";import{B as v}from"./book-animation.4Qb8F8Ht.js";let o=null;document.addEventListener("astro:page-load",()=>{const l=document.getElementById("loading-screen"),w=document.getElementById("horizontal-container"),f=document.querySelector(".loading-progress"),k=document.querySelector(".loading-title");sessionStorage.getItem("anxiete-visited")==="true"&&l?(l.style.display="none",g()):(sessionStorage.setItem("anxiete-visited","true"),t.to(f,{width:"100%",duration:1.5,ease:"power2.inOut"}),t.to(k,{opacity:1,y:0,duration:.8,ease:"power3.out"}),t.to(l,{opacity:0,duration:.5,delay:2,onComplete:()=>{l.style.display="none",g()}}));function g(){const n=w,i=n.querySelectorAll(".section"),u=i[0],d=i[1],y=d?.scrollWidth||d?.offsetWidth||0,p=(u?.offsetWidth||0)+Math.max(y,3200);n.style.width=`${p}px`;const r=sessionStorage.getItem("anxiete-scroll-position");let e=r?parseFloat(r):0;const b=p-window.innerWidth;if(e=Math.max(0,Math.min(e,b)),e>0){t.set(n,{x:-e});const a=document.querySelector(".scroll-indicator");e>100&&(a.style.opacity="0");const s=document.querySelector(".dots-bottom");s&&e>300&&t.set(s,{opacity:0,visibility:"hidden"})}const c=document.querySelector(".dots-bottom");window.addEventListener("wheel",a=>{a.preventDefault(),e+=a.deltaY,e=Math.max(0,Math.min(e,b)),sessionStorage.setItem("anxiete-scroll-position",e.toString()),t.to(n,{x:-e,duration:.5,ease:"power2.out"});const s=document.querySelector(".scroll-indicator");if(e>100?s.style.opacity="0":s.style.opacity="1",c){const m=Math.max(0,1-e/300);t.set(c,{opacity:m}),m===0&&t.set(c,{visibility:"hidden"})}},{passive:!1}),document.querySelector(".voir-plus")?.addEventListener("click",a=>{a.preventDefault(),e=document.getElementById("anxiete-2").offsetLeft,sessionStorage.setItem("anxiete-scroll-position",e.toString()),t.to(n,{x:-e,duration:1,ease:"power3.inOut"}),c&&t.to(c,{opacity:0,visibility:"hidden",duration:.5})}),document.addEventListener("astro:before-swap",a=>{(a.to?.url||window.location.href).includes("/projets/anxiete")||sessionStorage.removeItem("anxiete-scroll-position")},{once:!0}),t.fromTo(".page-title",{opacity:0,x:-50},{opacity:1,x:0,duration:.8,ease:"power3.out",delay:.2}),t.fromTo(".flower-blue",{opacity:0,scale:.8},{opacity:1,scale:1,duration:1,ease:"power3.out",delay:.4}),t.fromTo(".flower-outline",{opacity:0},{opacity:.7,duration:1,ease:"power3.out",delay:.3}),t.fromTo(".number",{opacity:0},{opacity:1,duration:.5,delay:.6}),t.fromTo(".voir-plus-container",{opacity:0,y:20},{opacity:1,y:0,duration:.5,delay:.8}),t.fromTo(".dots-bottom",{opacity:0,visibility:"hidden"},{opacity:1,visibility:"visible",duration:.8,ease:"power3.out",delay:.5}),x()}function x(){const n=document.getElementById("book-canvas-container"),i=document.querySelector(".book-page-indicator"),u=document.querySelector(".book-click-prev"),d=document.querySelector(".book-click-next");if(!n)return;const y="/assets/anxiete/book-couv.webp",p=[{front:"/assets/anxiete/book-couv-2.webp",back:"/assets/anxiete/book-page-01.webp"},{front:"/assets/anxiete/book-page-02.webp",back:"/assets/anxiete/book-page-03.webp"},{front:"/assets/anxiete/book-page-04.webp",back:"/assets/anxiete/book-page-05.webp"},{front:"/assets/anxiete/book-page-06.webp",back:"/assets/anxiete/book-page-07.webp"},{front:"/assets/anxiete/book-page-08.webp",back:"/assets/anxiete/book-page-09.webp"},{front:"/assets/anxiete/book-page-10.webp",back:"/assets/anxiete/book-page-11.webp"},{front:"/assets/anxiete/book-page-12.webp",back:"/assets/anxiete/book-page-13.webp"},{front:"/assets/anxiete/book-page-14.webp",back:"/assets/anxiete/book-page-15.webp"},{front:"/assets/anxiete/book-page-16.webp",back:"/assets/anxiete/book-page-17.webp"},{front:"/assets/anxiete/book-page-18.webp",back:"/assets/anxiete/book-page-19.webp"},{front:"/assets/anxiete/book-page-20.webp",back:"/assets/anxiete/book-page-21.webp"},{front:"/assets/anxiete/book-page-22.webp",back:"/assets/anxiete/book-page-23.webp"}];o&&(o.destroy(),o=null),o=new v({container:n,leftCover:y,pages:p,onPageChange:(e,b)=>{i&&(i.textContent=`${e} / ${b}`)}}),u?.addEventListener("click",()=>{o?.prevPage()}),d?.addEventListener("click",()=>{o?.nextPage()});const r=e=>{e.key==="ArrowLeft"?o?.prevPage():e.key==="ArrowRight"&&o?.nextPage()};document.addEventListener("keydown",r),document.addEventListener("astro:before-swap",()=>{document.removeEventListener("keydown",r),o&&(o.destroy(),o=null)},{once:!0})}});
